KCPSM6 Assembler log file for program 'C:\Unief antwerpen\computerarchitectuur\juist project latest versie\PROJECT\testprg.psm'.
Generated by KCPSM6 version v2.31
Ken Chapman - Xilinx Ltd - 9th August 2012

Assembly datestamp: 11 May 2016
Assembly timestamp: 23:35:12

Contents
  Assembly listing
  List of PSM files
  List of CONSTANTs
  List of TABLEs
  List of STRINGs
  List of line labels
  Instruction usage statistics


Last occupied address: 0DC hex
Nominal program memory size: 1K (1024)   address(9:0)
Actual memory size: 4096
  (Default memory size)
Occupied memory locations: 221
Memory locations available: 3875


Assembly listing

 Addr Code                         Instruction

 000                               ;dzadz
 000                               ; register remaming
 000                               NAMEREG s8, inputb             ;input buffer
 000                               ; declaration of inputs
 000                               CONSTANT switches, 02
 000                               CONSTANT buffer, 00
 000                               CONSTANT rx, 01
 000                               CONSTANT clk_ms, 07
 000                               ; declaration of outputs
 000                               CONSTANT tx, 01
 000                               CONSTANT leds, 02
 000                               CONSTANT servo_1, 03
 000                               CONSTANT servo_2, 04
 000                   cold_start: 
 000  01800                        LOAD s8[inputb], 00
 001  01E00                        LOAD sE, 00
 002  0197D                        LOAD s9, 7D[01111101'b]        ; zet op neutraal 125
 003  01B7D                        LOAD sB, 7D[01111101'b]        ; zet op neutraal 125
 004  2D903                        OUTPUT s9, 03[servo_1]
 005  2DB04                        OUTPUT sB, 04[servo_2]
 006                       mainlp: 
 006  22036                        JUMP 036[rddata]               ; Wachten op een '$' teken (start van inlezen)
 007                               ;--------------------AUTO---------------------------
 007                       cmdcar: 
 007  2D501                        OUTPUT s5, 01[tx]
 008  1D51E                        COMPARE s5, 1E[30'd]           ;Controleren of de waarde onder 30
 009  3A00B                        JUMP C, 00B[stop]
 00A  3600F                        JUMP NZ, 00F[move]
 00B                         stop: 
 00B  200DA                        CALL 0DA[checker]
 00C  0197D                        LOAD s9, 7D[01111101'b]        ; neutrale positie
 00D  01B7D                        LOAD sB, 7D[01111101'b]        ;Neutrale positie
 00E  22033                        JUMP 033[send_data]
 00F                         move: 
 00F  1DD01                        COMPARE sD, 01                 ;     Achteruit rijden (checken of x - is)
 010  32012                        JUMP Z, 012[backwards]
 011  22019                        JUMP 019[forward]
 012                    backwards: 
 012  1450E                        SR0 s5                         ;delen door 2 zodat de waarde van 0-124.
 013  1450E                        SR0 s5                         ;delen door 2 zodat de waarde van 0-66 is. Zodat de motor niet te snel rijdt (geen 255)
 014  0197D                        LOAD s9, 7D[01111101'b]        ;laad default waarde 125
 015  01B7D                        LOAD sB, 7D[01111101'b]        ;laad default waarde 125
 016  18950                        SUB s9, s5                     ;verminder met X waarde
 017  18B50                        SUB sB, s5                     ;verminder met X waarde
 018  22022                        JUMP 022[calculate_directionB]
 019                      forward: 
 019  1450E                        SR0 s5
 01A  1450E                        SR0 s5
 01B  1157D                        ADD s5, 7D[01111101'b]         ; delende door 4 en 125 toevoegen. Zodat de waarde van 126-255 gaat. Pulse is dan tussen 1,5 en 2 ms
 01C  00950                        LOAD s9, s5
 01D  00B50                        LOAD sB, s5
 01E  2201F                        JUMP 01F[calculate_directionF]
 01F         calculate_directionF: 
 01F  1DE01                        COMPARE sE, 01                 ; controleren of de y positief of negatief is.
 020  32025                        JUMP Z, 025[left_wheel]        ; linker wiel sneller laten rijden
 021  2202C                        JUMP 02C[right_wheel]          ; rechter wiel sneller laten rijden
 022         calculate_directionB: 
 022  1DE01                        COMPARE sE, 01                 ; controleren of de y positief of negatief is.
 023  3202C                        JUMP Z, 02C[right_wheel]       ; rechter wiel sneller laten rijden
 024  22025                        JUMP 025[left_wheel]           ; linker wiel sneller laten rijden
 025                   left_wheel: 
 025                               ;call checker;
 025  1460E                        SR0 s6
 026  1460E                        SR0 s6
 027  1460E                        SR0 s6                         ;delen door 8
 028                               ;add s9, s6      ;voeg correctie toe aan wiel register
 028  18B60                        SUB sB, s6
 029  2D901                        OUTPUT s9, 01[tx]
 02A  2DB01                        OUTPUT sB, 01[tx]
 02B  22033                        JUMP 033[send_data]
 02C                  right_wheel: 
 02C                               ;call checker;
 02C  1460E                        SR0 s6
 02D  1460E                        SR0 s6
 02E  1460E                        SR0 s6                         ;delen door 8
 02F                               ;add sB, s6      ;voeg correctie toe aan wiel register.
 02F  18960                        SUB s9, s6
 030  2D901                        OUTPUT s9, 01[tx]
 031  2DB01                        OUTPUT sB, 01[tx]
 032  22033                        JUMP 033[send_data]
 033                    send_data: 
 033  2D903                        OUTPUT s9, 03[servo_1]         ;Zend data naar de servo(0x03)
 034  2DB04                        OUTPUT sB, 04[servo_2]         ;Zend data naar de servo(0x04)
 035  22006                        JUMP 006[mainlp]
 036                               ;-----------------------------------------------------
 036                       rddata: 
 036  1D824                        COMPARE s8[inputb], 24         ;als een commando onderbroken is door een $ teken kan er directe overgegaan worden met een ander commando
 037  3203C                        JUMP Z, 03C[strtcmd]
 038  200CA                        CALL 0CA[rdbuff]               ;lees een karakter in
 039  1D824                        COMPARE s8[inputb], 24
 03A  3203C                        JUMP Z, 03C[strtcmd]           ;Wanneer het een dollar teken is wordt er door gegaan, anders wordt er gewacht.
 03B  22006                        JUMP 006[mainlp]
 03C                               ;------------------------------------------------------
 03C                      strtcmd: 
 03C  200CA                        CALL 0CA[rdbuff]               ;Wacht tot er een teken binnenkomt
 03D  1D841                        COMPARE s8[inputb], 41         ;vergelijk met een 'A'
 03E  32040                        JUMP Z, 040[acmd]
 03F  22006                        JUMP 006[mainlp]
 040                               ;----------------------------------------------------
 040                         acmd: 
 040  200CA                        CALL 0CA[rdbuff]               ; Wacht tot er een teken binnenkomt
 041  1D843                        COMPARE s8[inputb], 43         ; vergelijk met een 'C'
 042  36006                        JUMP NZ, 006[mainlp]
 043                               ; breek commando af
 043  200CA                        CALL 0CA[rdbuff]               ;Wacht tot er een teken binnenkomt
 044  1D843                        COMPARE s8[inputb], 43         ;vergelijk met een 'C'
 045  36006                        JUMP NZ, 006[mainlp]
 046  200CA                        CALL 0CA[rdbuff]
 047  1D85F                        COMPARE s8[inputb], 5F         ;Vergelijk met een '_'
 048  3204A                        JUMP Z, 04A[_cmd]
 049  22006                        JUMP 006[mainlp]
 04A                               ;---------------------------------------------
 04A                         _cmd: 
 04A  01F00                        LOAD sF, 00                    ;wacht op 2 '_' tekens
 04B                        _cmd2: 
 04B  200CA                        CALL 0CA[rdbuff]
 04C  1D85F                        COMPARE s8[inputb], 5F
 04D  36006                        JUMP NZ, 006[mainlp]
 04E  11F01                        ADD sF, 01
 04F  1DF02                        COMPARE sF, 02
 050  32052                        JUMP Z, 052[cmddata1]
 051  2204B                        JUMP 04B[_cmd2]
 052                               ;---------------------------------------------
 052                     cmddata1: ;INLEZEN VAN X
 052  200CA                        CALL 0CA[rdbuff]
 053  1D820                        COMPARE s8[inputb], 20         ;kijk of ereen spatie passeerd
 054  36006                        JUMP NZ, 006[mainlp]
 055  01D00                        LOAD sD, 00                    ; zet de min van x op nul.
 056  01C00                        LOAD sC, 00                    ; zet de counter op nul;
 057  200CA                        CALL 0CA[rdbuff]               ; wachten op de volgende input
 058  1D82D                        COMPARE s8[inputb], 2D         ; vergelijk de input met een min teken.
 059  30088                        CALL Z, 088[cmddata1Neg]
 05A  200D4                        CALL 0D4[nxtknmbr]
 05B  00080                        LOAD s0, s8[inputb]
 05C  11C01                        ADD sC, 01[01'd]               ; increment de counter
 05D  20091                        CALL 091[datachck1]            ;check op spatie of getal
 05E  00180                        LOAD s1, s8[inputb]
 05F  11C01                        ADD sC, 01[01'd]               ;increment counter
 060  20091                        CALL 091[datachck1]            ;check op spatie of getal
 061  00280                        LOAD s2, s8[inputb]
 062  11C01                        ADD sC, 01[01'd]               ;increment counter
 063  200CA                        CALL 0CA[rdbuff]
 064  1D820                        COMPARE s8[inputb], 20         ;kijken of er een spatie gepasseerd is, zoniet commando stoppen
 065  36006                        JUMP NZ, 006[mainlp]
 066  220A0                        JUMP 0A0[data1inrgstr]
 067                     cmddata2: ;INLEZEN VAN Y
 067  01E00                        LOAD sE, 00                    ; reset negatieve waarde y.
 068  01C00                        LOAD sC, 00
 069  200CA                        CALL 0CA[rdbuff]
 06A  1D82D                        COMPARE s8[inputb], 2D
 06B  3008B                        CALL Z, 08B[cmddata2Neg]
 06C  200D4                        CALL 0D4[nxtknmbr]
 06D  00080                        LOAD s0, s8[inputb]
 06E  11C01                        ADD sC, 01[01'd]
 06F  20096                        CALL 096[datachck2]
 070  00180                        LOAD s1, s8[inputb]
 071  11C01                        ADD sC, 01[01'd]
 072  20096                        CALL 096[datachck2]
 073  00280                        LOAD s2, s8[inputb]
 074  11C01                        ADD sC, 01[01'd]
 075  200CA                        CALL 0CA[rdbuff]
 076  1D820                        COMPARE s8[inputb], 20
 077  36006                        JUMP NZ, 006[mainlp]
 078  220A3                        JUMP 0A3[data2inrgstr]
 079                     cmddata3: ;INLEZEN VAN Z
 079  01F00                        LOAD sF, 00                    ; reset negatieve waarde z
 07A  01C00                        LOAD sC, 00
 07B  200CA                        CALL 0CA[rdbuff]
 07C  1D82D                        COMPARE s8[inputb], 2D
 07D  3008E                        CALL Z, 08E[cmddata3Neg]
 07E  200D4                        CALL 0D4[nxtknmbr]
 07F  00080                        LOAD s0, s8[inputb]
 080  11C01                        ADD sC, 01[01'd]
 081  2009B                        CALL 09B[datachck3]
 082  00180                        LOAD s1, s8[inputb]
 083  11C01                        ADD sC, 01[01'd]
 084  2009B                        CALL 09B[datachck3]
 085  00280                        LOAD s2, s8[inputb]
 086  11C01                        ADD sC, 01[01'd]
 087                               ;Geen spatie nodig laatste nummer
 087  220A6                        JUMP 0A6[data3inrgstr]
 088                               ;-------Negatieve waardes onthouden --------------
 088                  cmddata1Neg: 
 088  01D01                        LOAD sD, 01                    ;negatieve waarde x
 089  200CA                        CALL 0CA[rdbuff]               ;
 08A  25000                        RETURN 
 08B                  cmddata2Neg: 
 08B  01E01                        LOAD sE, 01                    ;negatieve waarde y
 08C  200CA                        CALL 0CA[rdbuff]               ;
 08D  25000                        RETURN 
 08E                  cmddata3Neg: 
 08E  01F01                        LOAD sF, 01                    ;negatieve waarde z
 08F  200CA                        CALL 0CA[rdbuff]               ;
 090  25000                        RETURN 
 091                               ;------ Checken of het nummer volledig is----------
 091                    datachck1: 
 091  200CA                        CALL 0CA[rdbuff]
 092  1D820                        COMPARE s8[inputb], 20         ; een spatie is gepasseerd.
 093  320A0                        JUMP Z, 0A0[data1inrgstr]
 094  200D4                        CALL 0D4[nxtknmbr]
 095  25000                        RETURN 
 096                    datachck2: 
 096  200CA                        CALL 0CA[rdbuff]
 097  1D820                        COMPARE s8[inputb], 20         ; een spatie is gepasseerd.
 098  320A3                        JUMP Z, 0A3[data2inrgstr]
 099  200D4                        CALL 0D4[nxtknmbr]
 09A  25000                        RETURN 
 09B                    datachck3: 
 09B  200CA                        CALL 0CA[rdbuff]
 09C  1D820                        COMPARE s8[inputb], 20         ;een spatie is gepasseerd.
 09D  320A6                        JUMP Z, 0A6[data3inrgstr]
 09E  200D4                        CALL 0D4[nxtknmbr]
 09F  25000                        RETURN 
 0A0                               ;------Nummer is volledig nu calculate-------------
 0A0                 data1inrgstr: ;calculate X
 0A0  200A9                        CALL 0A9[calcDate]
 0A1  00540                        LOAD s5, s4                    ;steken in de x waarde register
 0A2  22067                        JUMP 067[cmddata2]
 0A3                 data2inrgstr: ;calculate Y
 0A3  200A9                        CALL 0A9[calcDate]
 0A4  00640                        LOAD s6, s4                    ;steken in de y waarde register
 0A5  22079                        JUMP 079[cmddata3]
 0A6                 data3inrgstr: ;calculate Z
 0A6  200A9                        CALL 0A9[calcDate]
 0A7  00740                        LOAD s7, s4                    ; steken in de z waarde register
 0A8  220C6                        JUMP 0C6[snddata]
 0A9                               ;------Converteren van characters naar volledig getal-----------
 0A9                     calcDate: 
 0A9  1DC01                        COMPARE sC, 01[01'd]           ;het getal bestaat uit één cijfer
 0AA  300B0                        CALL Z, 0B0[onenmbr]
 0AB  1DC02                        COMPARE sC, 02[02'd]           ;het getal bestaat uit twee cijfers
 0AC  300B2                        CALL Z, 0B2[twonmbr]
 0AD  1DC03                        COMPARE sC, 03[03'd]           ;het getal bestaat uit drie cijfers
 0AE  300B6                        CALL Z, 0B6[threenmbr]
 0AF  25000                        RETURN 
 0B0                      onenmbr: 
 0B0  00400                        LOAD s4, s0                    ;steek het getal in de uitkomst buffer register
 0B1  25000                        RETURN 
 0B2                      twonmbr: 
 0B2  00410                        LOAD s4, s1                    ; steek het tweede getal in de uitkomst buffer
 0B3  00300                        LOAD s3, s0                    ; steek het eerste getal in de eenheden buffer
 0B4  200BC                        CALL 0BC[lp10th]               ; gebruik de eenheden buffer voor een aantal tienheden toe te voegen
 0B5  25000                        RETURN 
 0B6                    threenmbr: 
 0B6  00420                        LOAD s4, s2                    ; steek het derde getal in de uitkomst buffer
 0B7  00310                        LOAD s3, s1                    ; steek het tweede getal in de eenheden buffer
 0B8  200BC                        CALL 0BC[lp10th]               ; tel een aantal tienheden op
 0B9  00300                        LOAD s3, s0                    ;   ; steek het eerste getal in de honderheden buffer
 0BA  200C1                        CALL 0C1[lp100th]              ; tel de honderheden op
 0BB  25000                        RETURN 
 0BC                       lp10th: 
 0BC  19301                        SUB s3, 01[01'd]               ;verminder de counter
 0BD  1140A                        ADD s4, 0A[10'd]               ; voeg 10 toe aan de uitkomst buffer
 0BE  1D300                        COMPARE s3, 00                 ; kijken of de counter 0 is, zoja stop met toevoegen
 0BF  360BC                        JUMP NZ, 0BC[lp10th]
 0C0  25000                        RETURN 
 0C1                      lp100th: 
 0C1  19301                        SUB s3, 01[01'd]
 0C2  11464                        ADD s4, 64[100'd]              ; voeg 100 toe aan de register
 0C3  1D300                        COMPARE s3, 00
 0C4  360BC                        JUMP NZ, 0BC[lp10th]
 0C5  25000                        RETURN 
 0C6                               ;--------------------------------------------
 0C6                      snddata: 
 0C6  2D501                        OUTPUT s5, 01[tx]              ;X WAARDE OUTPUTTE
 0C7  2D601                        OUTPUT s6, 01[tx]              ;Y WAARDE OUTPUTTE
 0C8  2D701                        OUTPUT s7, 01[tx]              ;Y WAARDE OUTPUTTE
 0C9  22007                        JUMP 007[cmdcar]
 0CA                               ;------------------------------------------------
 0CA                       rdbuff: 
 0CA  09A00                        INPUT sA, 00[buffer]           ; read buffer 00001000 their is something in the buffer
 0CB  03A04                        AND sA, 04[00000100'b]         ;haal de belangerijke bit uit de flag
 0CC  1DA04                        COMPARE sA, 04[00000100'b]     ;if buffer is full (exit)
 0CD  32006                        JUMP Z, 006[mainlp]
 0CE                     bfrempty: 
 0CE  09A00                        INPUT sA, 00[buffer]
 0CF  03A08                        AND sA, 08[00001000'b]         ;haal de belangerijke bit uit de flag. Deze bit wordt gebruik om te kijken of er data input zit
 0D0  1DA08                        COMPARE sA, 08[00001000'b]     ;  ; controleer of de bit een '1' is
 0D1  360CE                        JUMP NZ, 0CE[bfrempty]
 0D2  09801                        INPUT s8[inputb], 01[rx]
 0D3  25000                        RETURN 
 0D4                     nxtknmbr: 
 0D4  1D82F                        COMPARE s8[inputb], 2F         ;kijken of het getal kleiner is dan 0(ASCII), zoja return mainlp
 0D5  3A006                        JUMP C, 006[mainlp]
 0D6  1D83A                        COMPARE s8[inputb], 3A         ;kijken of het groter is dan 10(ASCII), zoja return mainlp
 0D7  3E006                        JUMP NC, 006[mainlp]
 0D8  19830                        SUB s8[inputb], 30             ;convert ASCI -> dec
 0D9  25000                        RETURN 
 0DA                      checker: 
 0DA  01101                        LOAD s1, 01[1'd]
 0DB  2D101                        OUTPUT s1, 01[tx]              ;
 0DC  25000                        RETURN 
 0DD                               ;-----------------------------------------------------



List of PSM files that have been assembled

C:\Unief antwerpen\computerarchitectuur\juist project latest versie\PROJECT\testprg.psm



List of defined constants

 CONSTANT name     Value        Source PSM File

 timestamp_hours   23'd         
 timestamp_minutes 35'd         
 timestamp_seconds 12'd         
 datestamp_year    16'd         
 datestamp_month   5'd          
 datestamp_day     11'd         
 switches          02           testprg.psm
 buffer            00           testprg.psm
 rx                01           testprg.psm
 clk_ms            07           testprg.psm
 tx                01           testprg.psm
 leds              02           testprg.psm
 servo_1           03           testprg.psm
 servo_2           04           testprg.psm



No TABLEs defined



List of text strings

 STRING name       String         Source PSM File

 KCPSM6_version$   "v2.31"        
 datestamp$        "11 May 2016"  
 timestamp$        "23:35:12"     



List of line labels

 Label                  Addr  Source PSM File

 cold_start             000   testprg.psm
 mainlp                 006   testprg.psm
 cmdcar                 007   testprg.psm
 stop                   00B   testprg.psm
 move                   00F   testprg.psm
 backwards              012   testprg.psm
 forward                019   testprg.psm
 calculate_directionF   01F   testprg.psm
 calculate_directionB   022   testprg.psm
 left_wheel             025   testprg.psm
 right_wheel            02C   testprg.psm
 send_data              033   testprg.psm
 rddata                 036   testprg.psm
 strtcmd                03C   testprg.psm
 acmd                   040   testprg.psm
 _cmd                   04A   testprg.psm
 _cmd2                  04B   testprg.psm
 cmddata1               052   testprg.psm
 cmddata2               067   testprg.psm
 cmddata3               079   testprg.psm
 cmddata1Neg            088   testprg.psm
 cmddata2Neg            08B   testprg.psm
 cmddata3Neg            08E   testprg.psm
 datachck1              091   testprg.psm
 datachck2              096   testprg.psm
 datachck3              09B   testprg.psm
 data1inrgstr           0A0   testprg.psm
 data2inrgstr           0A3   testprg.psm
 data3inrgstr           0A6   testprg.psm
 calcDate               0A9   testprg.psm
 onenmbr                0B0   testprg.psm
 twonmbr                0B2   testprg.psm
 threenmbr              0B6   testprg.psm
 lp10th                 0BC   testprg.psm
 lp100th                0C1   testprg.psm
 snddata                0C6   testprg.psm
 rdbuff                 0CA   testprg.psm
 bfrempty               0CE   testprg.psm
 nxtknmbr               0D4   testprg.psm
 checker                0DA   testprg.psm



Instruction usage statistics

 Instruction    Instances

 LOAD             39
 STAR              -

 AND               2
 OR                -
 XOR               -

 ADD              13
 ADDCY             -
 SUB               7
 SUBCY             -

 TEST              -
 TESTCY            -
 COMPARE          30
 COMPARECY         -

 SL0               -
 SL1               -
 SLX               -
 SLA               -
 RL                -
 SR0              10
 SR1               -
 SRX               -
 SRA               -
 RR                -

 REGBANK           -

 INPUT             3
 OUTPUT           13
 OUTPUTK           -

 STORE             -
 FETCH             -

 DISABLE           -
 ENABLE            -
 RETURNI           -

 JUMP             46
 JUMP@             -
 CALL             43
 CALL@             -
 RETURN           15
 LOAD&RETURN       -

 HWBUILD           -



End of KCPSM6 log file.
